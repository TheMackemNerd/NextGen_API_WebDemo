<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">

    <!-- jQuery -->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.browser.min.js"></script>

    <!-- POC Scripts -->
    <script src="js/securecheck.js"></script>
    <script src="js/banner.js"></script>

    <title>API and Authentication POC Client</title>
</head>
<body>
    <div id="page">
        <header id="fh5co-header" class="fh5co-cover js-fullheight" role="banner">
            <div class="overlay"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2 text-center">
                        <div class="display-t js-fullheight">
                            <div class="display-tc js-fullheight animate-box" data-animate-effect="fadeIn">
                                <h1>Logging you in</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    
    <script>

        try {
            tokenCheck(function (error, result) {
                if (error) {
                    console.log("Check is in error");
                    window.location.replace("error.html?errordesc=" + error);
                }
                else {
                    // Everything is fine
                    console.log("Check is successful");

                    // Replace the history entry to remove the auth code from the browser address bar
                    window.history.replaceState({}, null, "/");

                    // redirect to the page the user was visiting when they were auth challenged
                    var path = sessionStorage.getItem("lastPage");
                    if (path == undefined) {
                        path = "index.html";
                    }
                    window.location.replace(path);
                }
            });
        }
        catch (e) {
            window.location.replace("error.html?errordesc=" + e);
        }



    </script>

</body>
</html>

